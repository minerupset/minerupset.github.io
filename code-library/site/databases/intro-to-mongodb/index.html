


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.ico">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.0.1">
    
    
      
        <title>Intro to MongoDB - Miner Curiosity</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.c3000690.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../extra_css/extra.css">
    
    
      
    
    
<meta name="robots" content="noindex"/>
<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.min.js"></script>

  </head>
  
  
    <body dir="ltr">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#intro-to-mongodb" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="Miner Curiosity" class="md-header-nav__button md-logo" aria-label="Miner Curiosity">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18,22A2,2 0 0,0 20,20V4C20,2.89 19.1,2 18,2H12V9L9.5,7.5L7,9V2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18Z" /></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" /></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Miner Curiosity
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Intro to MongoDB
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" /></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Miner Curiosity" class="md-nav__button md-logo" aria-label="Miner Curiosity">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18,22A2,2 0 0,0 20,20V4C20,2.89 19.1,2 18,2H12V9L9.5,7.5L7,9V2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18Z" /></svg>

    </a>
    Miner Curiosity
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      C#
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="C#" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        C#
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../csharp/hello-world/" title="Hello World" class="md-nav__link">
      Hello World
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Python
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Python" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Python
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../python/hello-world/" title="Hello World" class="md-nav__link">
      Hello World
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../python/working-with-files/" title="Working With Files" class="md-nav__link">
      Working With Files
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Node.JS
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Node.JS" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Node.JS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../js/hello-world/" title="Hello World" class="md-nav__link">
      Hello World
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../js/non-blocking-vs-concurrent/" title="Non-blocking and Concurrency" class="md-nav__link">
      Non-blocking and Concurrency
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../js/intro-to-webscraping/" title="Intro to Webscraping" class="md-nav__link">
      Intro to Webscraping
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      React.JS
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="React.JS" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        React.JS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../js/hello-react/" title="Hello React" class="md-nav__link">
      Hello React
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Vanilla JS
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Vanilla JS" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Vanilla JS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../js/basic-web-js/" title="Basic Web Interactivity" class="md-nav__link">
      Basic Web Interactivity
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../js/callbacks-promises-async/" title="Callbacks, Promises, & Async" class="md-nav__link">
      Callbacks, Promises, & Async
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Git / GitHub
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Git / GitHub" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Git / GitHub
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../git/intro/" title="Git Introduction" class="md-nav__link">
      Git Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../git/reminders/" title="Git Reminders" class="md-nav__link">
      Git Reminders
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" checked>
    
    <label class="md-nav__link" for="nav-7">
      Databases
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Databases" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Databases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../intro-to-dbs/" title="Basic DB Information" class="md-nav__link">
      Basic DB Information
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Intro to MongoDB
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,9H17V7H3V9M3,13H17V11H3V13M3,17H17V15H3V17M19,17H21V15H19V17M19,7V9H21V7H19M19,13H21V11H19V13Z" /></svg>
        </span>
      </label>
    
    <a href="./" title="Intro to MongoDB" class="md-nav__link md-nav__link--active">
      Intro to MongoDB
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-mongodb" class="md-nav__link">
    What is MongoDB?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture-of-mongoose-in-nodejs" class="md-nav__link">
    Architecture of Mongoose in Node.js
  </a>
  
    <nav class="md-nav" aria-label="Architecture of Mongoose in Node.js">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-structure-and-requirements" class="md-nav__link">
    File Structure and Requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dbjs" class="md-nav__link">
    db.js
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#userjs" class="md-nav__link">
    User.js
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#userscontrollerjs" class="md-nav__link">
    usersController.js
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tying-objects-together" class="md-nav__link">
    Tying Objects Together
  </a>
  
    <nav class="md-nav" aria-label="Tying Objects Together">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linking-two-separate-models" class="md-nav__link">
    Linking Two Separate Models
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querying-user-by-comment-and-vice-versa" class="md-nav__link">
    Querying User by Comment and Vice Versa
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#changing-a-comment-or-user" class="md-nav__link">
    Changing a Comment or User
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deleting-a-comment-or-user" class="md-nav__link">
    Deleting a Comment or User
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Other Tools
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Other Tools" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Other Tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/vs-code-tools/" title="VS Code Tools" class="md-nav__link">
      VS Code Tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/html/" title="Basic HTML" class="md-nav__link">
      Basic HTML
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/css/" title="Basic CSS" class="md-nav__link">
      Basic CSS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/os-scripting/" title="Terminal / Shell Scripting" class="md-nav__link">
      Terminal / Shell Scripting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/rpi-for-development/" title="RPi For Development" class="md-nav__link">
      RPi For Development
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-mongodb" class="md-nav__link">
    What is MongoDB?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture-of-mongoose-in-nodejs" class="md-nav__link">
    Architecture of Mongoose in Node.js
  </a>
  
    <nav class="md-nav" aria-label="Architecture of Mongoose in Node.js">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-structure-and-requirements" class="md-nav__link">
    File Structure and Requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dbjs" class="md-nav__link">
    db.js
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#userjs" class="md-nav__link">
    User.js
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#userscontrollerjs" class="md-nav__link">
    usersController.js
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tying-objects-together" class="md-nav__link">
    Tying Objects Together
  </a>
  
    <nav class="md-nav" aria-label="Tying Objects Together">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linking-two-separate-models" class="md-nav__link">
    Linking Two Separate Models
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querying-user-by-comment-and-vice-versa" class="md-nav__link">
    Querying User by Comment and Vice Versa
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#changing-a-comment-or-user" class="md-nav__link">
    Changing a Comment or User
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deleting-a-comment-or-user" class="md-nav__link">
    Deleting a Comment or User
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <h1 id="intro-to-mongodb">Intro to MongoDB</h1>
<h2 id="what-is-mongodb">What is MongoDB?</h2>
<p>MongoDB is a document-based database system. What that means is you query your documents in a JSON-like structure, as opposed to indexed tables. </p>
<table>
    <tr>
        <th>SQL type</th>
        <th>MongoDB</th>
    </tr>
    <tr>
        <td>Database</td>
        <td>Database</td>
    </tr>
    <tr>
        <td>Table</td>
        <td>Collection</td>
    </tr>
    <tr>
        <td>Record</td>
        <td>Document</td>
    </tr>
</table>

<p>MongoDB is the actual database, but there are multiple ways to interact with a Mongo database:
- via the command line
- with a GUI tool (like Mongo Compass)
- through an ODM in your code, like mongoose for Node</p>
<h2 id="architecture-of-mongoose-in-nodejs">Architecture of Mongoose in Node.js</h2>
<p>To make use of a MongoDB with Node, we use the mongoose ODM to act as that in-between layer. It will manage all of our queries and database actions, and its architecture allows for some clean abstraction.</p>
<h3 id="file-structure-and-requirements">File Structure and Requirements</h3>
<p>Things I assume you know:</p>
<ul>
<li>How Node handles exports</li>
<li>What Promises &amp; Async/Await are</li>
</ul>
<p>Assuming you have already:</p>
<ul>
<li>used <code class="highlight">npm init</code> to create a new node project</li>
<li>added mongoose to your project with <code>npm i mongoose</code></li>
<li>you want to make a model of a single object type simple, like "User"</li>
</ul>
<p>You'll want to have the following 3 documents:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">|</span>-db.js
<span class="p">|</span>-User.js
<span class="p">|</span>-usersController.js
</code></pre></div>
</td></tr></table>

<p>Your <code class="highlight">db.js</code> file handles your database connection and routing. The <code class="highlight">User.js</code> deals with the <em>Schema</em>, or structure of what defines a User object, and your <code class="highlight">usersController.js</code> drives the actual actions your system will take. </p>
<h3 id="dbjs"><code class="highlight">db.js</code></h3>
<p>Let's look at <code class="highlight">db.js</code>first:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kr">const</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;mongoose&quot;</span><span class="p">);</span>

<span class="c1">//This is your connection string to the example-database</span>
<span class="kr">const</span> <span class="nx">connectionString</span> <span class="o">=</span> <span class="s2">&quot;mongodb://localhost:27017/example-database&quot;</span><span class="p">;</span>

<span class="c1">//Mongoose has some deprecated functions to be aware of</span>
<span class="c1">//useFindAndModify always gives me a headache</span>
<span class="nx">mongoose</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">connectionString</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">useNewUrlParser</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">useUnifiedTopology</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">useCreateIndex</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">useFindAndModify</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="p">=&gt;{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Connected to MongoDB @ </span><span class="si">${</span><span class="nx">connectionString</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="p">})</span>
<span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Mongoose Error: </span><span class="si">${</span><span class="nx">err</span><span class="si">}</span><span class="sb">`</span><span class="p">))</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span><span class="nx">User</span><span class="o">:</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;./User&quot;</span><span class="p">)};</span>
</code></pre></div>
</td></tr></table>

<p>So <code class="highlight">db.js</code> essentially just gets us to the database. That's it. The one interesting nuance is the very last line, the <code class="highlight"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span></code>. We'll cover that when we get to <code class="highlight">usersController.js</code>, but this will make our syntax clean and consistent with the CLI for MongoDB</p>
<h3 id="userjs"><code class="highlight">User.js</code></h3>
<p>Next for our User definition. Like <code class="highlight">db.js</code>, this is more in configuration than actual logic</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kr">const</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;mongoose&quot;</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">UserSchema</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">mongoose</span><span class="p">.</span><span class="nx">Schema</span><span class="p">({</span>
    <span class="nx">name</span><span class="o">:</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="nb">String</span><span class="p">,</span> <span class="nx">required</span><span class="o">:</span> <span class="kc">true</span><span class="p">},</span>
    <span class="nx">email</span><span class="o">:</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="nb">String</span><span class="p">,</span> <span class="nx">required</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">unique</span><span class="o">:</span> <span class="kc">true</span><span class="p">},</span>
    <span class="c1">//Never actually do this with passwords</span>
    <span class="c1">//This is just an example</span>
    <span class="nx">password</span><span class="o">:</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="nb">String</span><span class="p">,</span> <span class="nx">required</span><span class="o">:</span> <span class="kc">true</span><span class="p">},</span>
<span class="p">});</span>

<span class="kr">const</span> <span class="nx">User</span> <span class="o">=</span> <span class="nx">mongoose</span><span class="p">.</span><span class="nx">model</span><span class="p">(</span><span class="s2">&quot;User&quot;</span><span class="p">,</span> <span class="nx">UserSchema</span><span class="p">);</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">User</span><span class="p">;</span>
</code></pre></div>
</td></tr></table>

<p>All we've done here is define what constitutes a User, in this case a name, an email, and a password. You can see that we set some requirements for our User, in that they are required to have certain elements and some of those elements must be true. You can look here (LINK) for more information on what data types are available for MongoDB.</p>
<h3 id="userscontrollerjs"><code class="highlight">usersController.js</code></h3>
<p>We've defined our database and what is a User. Now let's give it some functionality.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kr">const</span> <span class="nx">User</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;./db&quot;</span><span class="p">);</span>

<span class="nx">async</span> <span class="kd">function</span> <span class="nx">createUser</span><span class="p">(</span><span class="nx">userData</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">await</span> <span class="nx">User</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">userData</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span><span class="nx">createUser</span><span class="p">}</span>
</code></pre></div>
</td></tr></table>

<h2 id="tying-objects-together">Tying Objects Together</h2>
<h3 id="linking-two-separate-models">Linking Two Separate Models</h3>
<p>Let's say you have an object that is comments on a blog post, and you have an object that is the user who made the blog post. Let's look at how you link those two:</p>
<p>First, in the User Schema, you need to bring give it a list of comments. For example:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kr">const</span> <span class="nx">UserSchema</span> <span class="o">=</span> <span class="nx">mongoose</span><span class="p">.</span><span class="nx">Schema</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="nx">name</span><span class="o">:</span> <span class="p">{</span> <span class="nx">type</span><span class="o">:</span> <span class="nb">String</span><span class="p">,</span> <span class="nx">required</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">unique</span><span class="o">:</span> <span class="kc">true</span> <span class="p">},</span>
    <span class="nx">comments</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">mongoose</span><span class="p">.</span><span class="nx">Schema</span><span class="p">.</span><span class="nx">Types</span><span class="p">.</span><span class="nx">ObjectId</span><span class="p">,</span>
        <span class="nx">ref</span><span class="o">:</span> <span class="s2">&quot;Comment&quot;</span><span class="p">,</span>
      <span class="p">},</span>
    <span class="p">],</span>
  <span class="p">},</span>
  <span class="p">{</span> <span class="nx">timestamps</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}</span>
<span class="p">);</span>
</code></pre></div>
</td></tr></table>

<p>What we did here was add a comments as a property of User. It is an array of objects, and those objects have an ObjectId linked to them, referring to objects of type 'Comment'.</p>
<p>Next, when you create a new Comment, you want it to be linked to a given User. Let's look at an example here:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="c1">//commentRoutes.js</span>
<span class="c1">//...</span>

<span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="nx">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;{</span>
    <span class="c1">//Create a comment, and get a User based on the form body</span>
    <span class="kr">const</span> <span class="nx">newComment</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">commentsController</span><span class="p">.</span><span class="nx">createComment</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
    <span class="kr">const</span> <span class="nx">thisUser</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">usersController</span><span class="p">.</span><span class="nx">getUserById</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">authorId</span><span class="p">);</span>

    <span class="c1">//Our User has a comments array property, so we push that on</span>
    <span class="nx">thisUser</span><span class="p">.</span><span class="nx">comments</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">newComment</span><span class="p">);</span>

    <span class="c1">//This is runs an update on our User to save this new comment</span>
    <span class="nx">await</span> <span class="nx">thisUser</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s2">&quot;...some response&quot;</span><span class="p">);</span>
<span class="p">})</span>
</code></pre></div>
</td></tr></table>

<h3 id="querying-user-by-comment-and-vice-versa">Querying User by Comment and Vice Versa</h3>
<p>Great, you've added a comment to a user object. But let's say you've found a comment in the wild. How are you querying to find the user? We can't use a JOIN statement in a NoSQL database, but we do have <code>populate()</code>. Let's take a look. </p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="c1">//commentRoutes.js</span>
<span class="c1">//...</span>

<span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;/:id&quot;</span><span class="p">,</span> <span class="nx">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;{</span>
    <span class="nx">await</span> <span class="nx">usersController</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span><span class="nx">comments</span><span class="o">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">})</span>
    <span class="p">.</span><span class="nx">populate</span><span class="p">({</span>
        <span class="nx">path</span><span class="o">:</span> <span class="s2">&quot;comments&quot;</span><span class="p">,</span>
        <span class="nx">match</span><span class="o">:</span> <span class="p">{</span><span class="nx">_id</span><span class="o">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="nx">exec</span><span class="p">();</span>

    <span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s2">&quot;...some response&quot;</span><span class="p">);</span>
<span class="p">})</span>
</code></pre></div>
</td></tr></table>

<p><code>populate()</code> essentially takes the ObjectId from the schema and actually fills it with the object in question. In this case, we also use the <code>match</code> parameter, which allows to find a specific comment. If we had wanted all the comments from a given user, we could have left the match parameter off. </p>
<p>We also have the <code>select</code> parameter, so that we can select just a certain field from the populated object, and not the whole thing.</p>
<h3 id="changing-a-comment-or-user">Changing a Comment or User</h3>
<p>If you edit a Comment and change the User, that has to be reflected. How do we achieve that?</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="c1">//commentRoutes.js</span>
<span class="c1">//EDIT ROUTE</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;/edit/:id&quot;</span><span class="p">,</span> <span class="nx">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="c1">//This allows you to pass the list of all users to your edit view</span>
    <span class="kr">const</span> <span class="nx">allUsers</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">usersController</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span>
    <span class="c1">//This gets the single user and the single comment</span>
    <span class="kr">const</span> <span class="nx">thisUser</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">usersController</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span><span class="s2">&quot;comments&quot;</span><span class="p">,</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">})</span>
    <span class="p">.</span><span class="nx">populate</span><span class="p">({</span><span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;comments&#39;</span><span class="p">,</span> <span class="nx">match</span><span class="o">:</span> <span class="p">{</span><span class="nx">_id</span><span class="o">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">}})</span>
    <span class="p">.</span><span class="nx">exec</span><span class="p">();</span>


    <span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s2">&quot;...some response&quot;</span><span class="p">{</span>
        <span class="nx">allUsers</span><span class="o">:</span> <span class="nx">allUsers</span><span class="p">,</span>
        <span class="nx">thisUser</span><span class="o">:</span> <span class="nx">thisUser</span><span class="p">,</span>
        <span class="nx">thisComment</span><span class="o">:</span> <span class="nx">thisUser</span><span class="p">.</span><span class="nx">comments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="p">});</span>
<span class="p">})</span>

<span class="c1">//...</span>
<span class="c1">//PUT ROUTE</span>
<span class="c1">//This allows you to update the comment, remove it from one user, and add it to another as needed</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">&quot;:/id&quot;</span><span class="p">,</span> <span class="nx">async</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;{</span>
    <span class="kr">const</span> <span class="nx">updatedComment</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">commentsController</span><span class="p">.</span><span class="nx">findByIdAndUpdate</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span> <span class="p">{</span><span class="k">new</span><span class="o">:</span> <span class="kc">true</span><span class="p">});</span>
    <span class="kr">const</span> <span class="nx">thisUser</span> <span class="o">=</span> <span class="nx">usersController</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span><span class="s1">&#39;comments._id&#39;</span><span class="o">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">});</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">thisUser</span><span class="p">.</span><span class="nx">_id</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="o">!==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">userId</span><span class="p">){</span>
        <span class="nx">thisUser</span><span class="p">.</span><span class="nx">comments</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
        <span class="nx">await</span> <span class="nx">thisUser</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
        <span class="kr">const</span> <span class="nx">newUser</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">usersController</span><span class="p">.</span><span class="nx">findById</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">userId</span><span class="p">);</span>
        <span class="nx">newUser</span><span class="p">.</span><span class="nx">comments</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">updatedComment</span><span class="p">);</span>
        <span class="nx">await</span> <span class="nx">newUser</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s2">&quot;...some response&quot;</span><span class="p">);</span>
<span class="p">})</span>
</code></pre></div>
</td></tr></table>

<h3 id="deleting-a-comment-or-user">Deleting a Comment or User</h3>
<p>If we delete a Comment, the User should know about it. Similarly, if we delete a User, the associated comments should know about it. Let's look at how.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="c1">//commentRoutes.js</span>
<span class="nx">router</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s2">&quot;/:id&quot;</span><span class="p">,</span> <span class="nx">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">await</span> <span class="nx">commentsController</span><span class="p">.</span><span class="nx">findByIdAndRemove</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
    <span class="kr">const</span> <span class="nx">thisUser</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">usersController</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span><span class="s1">&#39;comments&#39;</span><span class="o">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">});</span>
    <span class="nx">thisUser</span><span class="p">.</span><span class="nx">comments</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
    <span class="nx">await</span> <span class="nx">thisUser</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s2">&quot;...some response&quot;</span><span class="p">);</span>
<span class="p">})</span>
</code></pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="c1">//userRoutes.js</span>
<span class="nx">router</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s2">&quot;/:id&quot;</span><span class="p">,</span> <span class="nx">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">deletedUser</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">usersController</span><span class="p">.</span><span class="nx">findByIdAndRemove</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
    <span class="nx">await</span> <span class="nx">commentsController</span><span class="p">.</span><span class="nx">remove</span><span class="p">({</span>
        <span class="nx">_id</span><span class="o">:</span><span class="p">{</span>
            <span class="nx">$in</span><span class="o">:</span> <span class="nx">deletedUser</span><span class="p">.</span><span class="nx">comments</span>
        <span class="p">}</span>
    <span class="p">});</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s2">&quot;...some response&quot;</span><span class="p">);</span>
<span class="p">})</span>
</code></pre></div>
</td></tr></table>

<p>So in both of these cases, you just use the <code>req.params.id</code> for the object you deleted to trace it back to the other impacted object and perform the necessary function. If you delete a comment, you remove that comment from its list and save the user. If you delete a user, you go and remove all of the comments that have an _id from the deleted User's comment section.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
<hr />
<div class="footer-container">
  <p class="footer-p">
    A training website intended to record learning. Visit
    <a href="https://minerupset.github.io/legal/">Legal</a> page for more
    information. Built with
    <a href="https://www.mkdocs.org" target="_blank">MkDocs</a>
  </p>
  <p id="random-quote-block">
    <span id="quotes-quote"></span><br/></span> - <span id="quotes-author"></span>
  </p>
</div>

    </div>
    
      <script src="../../assets/javascripts/vendor.f45d2d8d.min.js"></script>
      <script src="../../assets/javascripts/bundle.74d0b805.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.7f7c8775.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="../../extra_js/extra.js"></script>
      
    
  </body>
</html>